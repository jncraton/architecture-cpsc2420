5 Processor Tyes and Instruction Sets
=====================================

Necessary Operations
--------------------

- In order to compute any computable function, a CPU needs to support only a deceptively small number of operations
- For example, `increment`, `decrement`, and `branch_if_not_zero` are sufficient

Included Operations
-------------------

- A very small instruction set is not convenient for the programmer or efficient for the hardware
- We include more complex operations for reasons of efficency and convenience rather than to be able to compute new functions

Tradeoffs
---------

- Convenience
- Speed
- Hardware cost
- Power efficiency
- Thermal efficiency

Instruction Set
---------------

- The set of instruction types that a CPU can decode and execute
- The instruction set specification will describe exactly how each instruction is executed

Instruction Format
------------------

- Specified binary representation of instructions

Opcodes
-------

- Typically a number representing the operation to perform

Operands
--------

- The value(s) needed to perform an operation

Results
-------

- Value returned by operation
- Storage location may be fixed or read from the instruction

Instruction Format
------------------

- Typically a binary string
- Divided into opcodes, operands, and values

---

![MIPS addi instruction](https://upload.wikimedia.org/wikipedia/commons/2/2a/Mips32_addi.svg){height=540px}

Variable Length Instructions
----------------------------

- Some instructions need fewer operands than others
- It may be advantageous to use variable length instructions, but it is frequently prefereable to use fixed length instructions
- Fixed length instructions are much easier to decode in hardware

Registers
---------

- Provide high-speed data storage
- Use fetch and store operations
- A typical computer will have less than 100

Floating Point Registers
------------------------

- Many systems will have separate registers for difference purposes
- Floating point is on common example of this

Typical Use
-----------

```
load memory location to R0
load memory location to R1
add R0 and R1, store result in R1
write R1 to a memory location
```

Register allocation
-------------------

- When creating programs it important to choose wisely how to use registers
- They are very limited, and memory access is expensive

Extended Registers
------------------

- Some systems may allow registers to be combined to store larger values
- For example, loading a double-length integer into R0 and R1

Instruction Set Sizes
---------------------

- Reduced Instruction Set Computer (RISC)
- Complex Instruction set Computer (CISC)
- RISC provides simpler CPUs longer programs
- RISC processors typically execute instructions in one cycle

RISC Execution Pipeline
-----------------------

1. Instruction fetch
2. Instruction decode and register fetch
3. Execute
4. Memory access
5. Register write back

Pipeline
--------

- Hardware executes each step of the process in turn
- We can exploit this fact to execute multiple instructions in paralell

---

![Pipeline Example](https://upload.wikimedia.org/wikipedia/commons/2/21/Fivestagespipeline.png)

Stalls
------